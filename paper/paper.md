---
title: "CDP: Software for Municipal Data Collection, Analysis, and Publication"
tags:
    - Python
    - JavaScript
    - open government
    - open data
    - open infrastructure
    - municipal governance
    - data archival
    - civic technology
    - natural language processing
authors:
    - name: Jackson Maxfield Brown
      orcid: 0000-0003-2564-0373
      affiliation: 1
    - name: To Huynh
      orcid: 0000-0002-9664-3662
      affiliation: 2
    - name: Isaac Na
      orcid: 0000-0002-0182-1615
      affiliation: 3
    - name: Brian Ledbetter
      affiliation: 1
    - name: Hawk Ticehurst
      affiliation: 1
    - name: Sara Liu
      affiliation: 4
    - name: Emily Giles
      affiliation: 4
    - name: Katlyn Greene
      affiliation: 4
    - name: Sung Cho
      affiliation: 4
    - name: Shak Ragoler
      affiliation: 4
    - name: Dhanya Pisharasyar
      affiliation: 4
    - name: Nicholas Weber
      orcid: 0000-0002-6008-3763
      affiliation: 1

affiliations:
    - name: University of Washington iSchool, University of Washington, Seattle
      index: 1
    - name: University of Washington, Seattle
      index: 2
    - name: McKelvey School of Engineering, Washington University, St. Louis
      index: 3
    - name: Independent Contributor
      index: 4

date: 26 September 2021
bibliography: paper.bib
---

# Summary

Cities, counties, and states throughout the USA are bound by law to archive recordings of public meetings. Most local governments comply with these laws by posting documents, audio or video recordings, and the results of legislature votes to content management systems. Council Data Project (CDP) is a collection of three open-source tools that improve the accessibility of local government data by systematically collecting, transforming, and re-publishing this data to the web. The software provided here can be used by civic technologists to promote government transparency, or in support of research by using processed data for public policy, natural language processing and machine learning, or information retrieval and discovery.

# Statement of Need

[Describe CDP as three tools that can be deployed as instances that correspond with a municipality] (max two sentences)

Research into municipal government, whether that be in processes, actions, legislation, or more, is incredible difficult due to the fact that each municipal government is unique. This has resulted in

There is a drought of research on municipal governance behaviors
largely because municipal government is so fractured, different technologies, regulations, etc
but CDP offers a simple solution to act as a general simple standard for building corpora for research and accessibility

## CDP Architecture

Council Data Project consists of three primary tools:

1. [cookiecutter-cdp-deployment](https://github.com/CouncilDataProject/cookiecutter-cdp-deployment): a Python [cookiecutter](https://cookiecutter.readthedocs.io/) template to assist users in fully deploying a new CDP instance. **There needs to be a description of the instance idea here for this to make sense**

2. [cdp-backend](https://github.com/CouncilDataProject/cdp-backend): a Python package containing CDP's database schema definition, a format for transcripts generated by speech-to-text algorithms, an infrastructure specification, and a processing pipeline implementations. **This is the heart of the research contribution - make sure it is clear what this package does in total - don't assume the reader knows that it fetches, transcribes, and indexes a transcripte (as well as voting, etc)**

3. [cdp-frontend](https://github.com/CouncilDataProject/cdp-frontend): a TypeScript library containing all frontend components and a compiled web application. **Say more - why is this a contribution? - How does it automate a publishing pipleline, etc**

## Cookiecutter and the Produced Repository

`cookiecutter-cdp-deployment` will generate all necessary files for an entirely new CDP deployment as well as additional setup documentation for the user to follow to fully complete the instance deployment process.

Utilizing [GitHub Actions](https://github.com/features/actions) and [GitHub Pages](https://pages.github.com/), data processing and web hosting are entirely free as long as the user sets their instances GitHub repository visibility to public. While the limited primary costs of CDP tools are:

1. [Google Speech-to-Text](https://cloud.google.com/speech-to-text/) for transcript generation.
2. [Firebase Cloud Firestore](https://firebase.google.com/docs/firestore/) for event metadata storage and access.
3. [Firebase Storage](https://firebase.google.com/docs/storage) for file storage and access.

![CDP Core Infrastructure Figure. Event Gather Pipeline: inputs, GitHub Action, Python Pipeline tasks, and storage. Event Index Pipeline: inputs, GitHub Action, Python n-gram generation, and storage. Web Application Building: inputs, GitHub Action, and GitHub Pages.\label{fig:core-infra}](./assets/cdp_core_infrastructure.png)

CDP tools allow for decentralized control over the management and deployment of each CDP instance while producing a standardized open-access dataset for both research and for municipal transparency and accessibility.

## Data Access

Once data is processed by a CDP instance, it is available through that instance's interactive web application.

![CDP Web Application. Screenshot of a single event's page. Navigation tabs for basic event details such as the minutes items, the entire transcript, and voting information. Additionally both the transcript search and the full transcript have links to jump to a specific sentence in the meeting.](./assets/event-page-screenshot.png)
This example event page can be found on our integration test instance: https://councildataproject.org/test-deployment/#/events/2b8d08eeea1a

For users who want programmatic access, each instance's repository README includes a programmatic quickstart guide and our database schema is autogenerated and stored in our `cdp-backend` [documentation](https://councildataproject.org/cdp-backend/database_schema.html).

```python
from cdp_backend.database import models as db_models
from cdp_backend.pipeline.transcript_model import Transcript
import fireo
from gcsfs import GCSFileSystem
from google.auth.credentials import AnonymousCredentials
from google.cloud.firestore import Client

# Connect to the database
fireo.connection(client=Client(
    project="cdp-test-deployment-435b5309",
    credentials=AnonymousCredentials()
))

# Read from the database
five_people = list(db_models.Person.collection.fetch(5))

# Connect to the file store
fs = GCSFileSystem(project="cdp-test-deployment-435b5309", token="anon")

# Read a transcript's details from the database
transcript_model = list(db_models.Transcript.collection.fetch(1))[0]

# Read the transcript directly from the file store
with fs.open(transcript_model.file_ref.uri, "r") as open_resource:
    transcript = Transcript.from_json(open_resource.read())

# OR download and store the transcript locally with `get`
fs.get(transcript_model.file_ref.uri, "local-transcript.json")
# Then read the transcript from your local machine
with open("local-transcript.json", "r") as open_resource:
    transcript = Transcript.from_json(open_resource.read())
```

# Acknowledgements

We wish to thank all DemocracyLab volunteers for the many hours of work and input on the many versions of CDP that have existed. From DemocracyLab, we would like to specifically thank Mark Frischmuth for the continued support and helpful discussions.

# References
